<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/@rdkit/rdkit/dist/RDKit_minimal.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        window
        .initRDKitModule()
        .then(function (RDKit) {
            console.log("RDKit version: " + RDKit.version());
            window.RDKit = RDKit;
        })
        .catch(() => {
        });
        </script>
        <style>
            #canvas-container{
                display: flex;
            }
        </style>
    <title>Server</title>
  </head>
  <body>
    <nav>
    <body bgcolor=" #D8D8BF" style="font-family:Arial, Helvetica, sans-serif; margin:0; padding-top:0; height:100%;">
    <div align="center" style="margin:0 auto; width: 1200px; color:#000000; background:#99CCCC; height:100%;">
        <br><table align="center" style="width:100%; margin:0;">
        <tbody><tr>
            
            <td><img align="center" style="width: 106px; height: 95px;float:left;" src="/figures/yun.png"></td>
            <td><h2 style="font-size:160%">MdDTI: multi-dimensional search for drug-target interaction prediction by preserving the consistency of attention distribution</h2></td>
        </tr>
        
        </tbody></table>
        <h2 align="center" style="font-size:150%; margin:0 auto">
            <span>|</span>
            <span><a href="/" style="color:#0000ff;">Home</a></span>
            <span>|</span>
            <span><a href="/datasets/" style="color:#0000ff;">Datasets</a></span>
            <span>|</span>
            <span><a href="/draw/" style="color:#0000ff;">Draw</a></span>
            <span>|</span>
            <span><a href="/server/" style="color: red;"style="color:#0000ff;">Server</a></span>
            <span>|</span>
            <span><a href="/about/" style="color:#0000ff;">About</a></span>
            <span>|</span>
        </h2><br><table align="center" style="width: 100%;color: #0000ff;">
        <tbody><tr></tr></tbody></table>            
    </div>
</body>
</nav>
    <div align="center" style="border-top:0;padding-top:0;margin: 0 auto; width: 1200px; height:100%; background:#ffffff">
    <div style="width: 80%; margin: 0 auto; text-align:justify; height:600px">
    <h1 style="margin-top: 0; text-align: center;">亲和力预测</h1>
    <form>
      <label for="smiles-input">输入SMILES:</label>
      <textarea id="smiles-input" name="smiles" required></textarea> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

      <label for="target-input">输入Sequence:</label>
      <textarea id="target-input" name="target" required></textarea> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

      <input type="button" id="submitBtn_p" value="Predict" onclick="predict()" disabled>
      <a href="http://localhost:8080">xxx</a><br>
      <h3 style="margin-bottom: 0;"">药物-氨基酸注意力分布图:</h3> 
      <div style="margin-top: 0;" id="heatmap-container"></div>
    </form>

    <script>
      const smilesInput = document.getElementById('smiles-input');
      const targetInput = document.getElementById('target-input');
      const submitBtn = document.getElementById('submitBtn_p');
        
      function checkInputs() {
        if (smilesInput.value.trim() !== '' && targetInput.value.trim() !== '') {
          submitBtn.disabled = false;
        } else {
          submitBtn.disabled = true;
        }
      };

      smilesInput.addEventListener('input', checkInputs);
      targetInput.addEventListener('input', checkInputs);

      function predict(){
        var smiles = document.getElementById("smiles-input").value;
        var sequence = document.getElementById("target-input").value;
        console.log(sequence)
      }

    
// 假设数据是一个一维数组，表示热力图的一行
var data = [0.2, 0.3, 0.5, 0.8, 0.6,0.2, 0.3, 0.5, 0.8, 0.6,0.2, 0.3, 0.5, 0.8, 0.6,0.2, 0.3, 0.5, 0.8, 0.6,0.2, 0.3, 0.5, 0.8, 0.6];

// 定义画布的宽度和高度
var width = 400;
var height = 10;

// 创建热力图容器元素的选择器
var container = d3.select("#heatmap-container");

// 创建热力图画布
var svg = container.append("svg")
  .attr("width", width)
  .attr("height", height);

// 创建颜色比例尺，用于将数据值映射到颜色
var colorScale = d3.scaleLinear()
  .domain([0, 1])  // 数据范围
  .range(["white", "red"]);  // 颜色范围

// 绘制热力图单元格
var cells = svg.selectAll("rect")
  .data(data)
  .enter()
  .append("rect")
  .attr("x", function(d, i) { return i * (width / data.length); })
  .attr("y", 0)
  .attr("width", width / data.length)
  .attr("height", height)
  .style("fill", function(d) { return colorScale(d); });
    </script>
  </div>
</div>
  </body>
</html>